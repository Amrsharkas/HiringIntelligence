The AI Generate button for job descriptions is failing. The error is:

pgsql
Copy
Edit
Failed to load resource: the server responded with a status of 500 (Internal Server Error)
This is coming from the generate-description endpoint. Here's what to do:

Fix the server route:
Make sure that the backend route /api/generate-description:

Accepts a POST request.

Properly extracts the jobTitle or relevant input from the request body.

Uses the OpenAI API to generate a description.

Returns a valid JSON response with the generated text.

Example route implementation (Node/Express):

ts
Copy
Edit
app.post('/api/generate-description', async (req, res) => {
  const { title } = req.body;
  if (!title) {
    return res.status(400).json({ error: 'Missing job title' });
  }

  try {
    const response = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer sk-proj-..." // Use the actual key from .env or secrets
      },
      body: JSON.stringify({
        model: "gpt-4",
        messages: [
          { role: "system", content: "You are a professional HR assistant generating detailed job descriptions." },
          { role: "user", content: `Generate a professional job description for the title: ${title}` }
        ],
        temperature: 0.7,
      })
    });

    const data = await response.json();
    const output = data.choices?.[0]?.message?.content;
    res.json({ description: output });
  } catch (err) {
    console.error("OpenAI error:", err);
    res.status(500).json({ error: 'Failed to generate description' });
  }
});
Frontend Call (check this too):
Make sure the frontend uses a POST request like:

ts
Copy
Edit
fetch("/api/generate-description", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ title: jobTitle }),
});
Secure the API Key:
Move the OpenAI API key to a .env file and do not hardcode it in frontend or commit it.

env
Copy
Edit
OPENAI_API_KEY=sk-proj-...
Access it in code using process.env.OPENAI_API_KEY.

After fixing this, test the AI Generate button again. It should return the generated description in the textarea.