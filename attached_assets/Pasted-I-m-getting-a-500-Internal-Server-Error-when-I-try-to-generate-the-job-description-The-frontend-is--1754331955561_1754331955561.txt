I'm getting a 500 Internal Server Error when I try to generate the job description. The frontend is sending a request to /api/generate-description, but it's failing. I need you to:

üîß Backend Fix
Ensure the route /api/generate-description exists and is handled properly in Express.

Use express.json() middleware to parse JSON bodies.

Log the value of req.body.title ‚Äî if it's missing or empty, return 400 with Missing job title.

Use the OpenAI Chat Completion API correctly. Here's a full working route:

js
Copy
Edit
import express from 'express';
import fetch from 'node-fetch';

const router = express.Router();

router.post('/api/generate-description', async (req, res) => {
  const { title } = req.body;
  console.log('Received title:', title);

  if (!title) {
    return res.status(400).json({ error: 'Missing job title' });
  }

  try {
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        Authorization: `Bearer ${process.env.OPENAI_API_KEY}`,
      },
      body: JSON.stringify({
        model: 'gpt-4',
        messages: [
          { role: 'system', content: 'You write professional job descriptions.' },
          { role: 'user', content: `Write a job description for a ${title}.` },
        ],
        temperature: 0.7,
      }),
    });

    const data = await response.json();
    console.log('OpenAI response:', data);

    if (data.choices && data.choices.length > 0) {
      return res.json({ description: data.choices[0].message.content });
    } else {
      return res.status(500).json({ error: 'No response from OpenAI.' });
    }
  } catch (err) {
    console.error('Error calling OpenAI:', err);
    return res.status(500).json({ error: 'OpenAI request failed.' });
  }
});

export default router;
Make sure this router is mounted in your main app.js or server.js:

js
Copy
Edit
import generateRoutes from './path/to/your/routes/file.js';
app.use(generateRoutes);
üåê Frontend Fix
In the frontend, check that you're sending the title correctly:

ts
Copy
Edit
const generateDescription = async (jobTitle) => {
  const res = await fetch('/api/generate-description', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ title: jobTitle }),
  });
  const data = await res.json();
  return data.description;
};
Log the value of jobTitle before calling this to ensure it‚Äôs not empty.

üîê Also check
Is OPENAI_API_KEY set correctly in the environment variables?

Add console.log(process.env.OPENAI_API_KEY) to confirm it's loaded.

Once this is implemented, restart the backend and test the /api/generate-description route with Postman or 